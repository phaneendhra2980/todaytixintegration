package services;

import static io.restassured.RestAssured.given;

import java.util.ArrayList;

import org.apache.http.HttpStatus;
import org.json.JSONArray;
import org.json.JSONObject;

import io.restassured.RestAssured;
import io.restassured.http.ContentType;
import io.restassured.response.Response;
import io.restassured.response.ResponseBody;

public class SeatsService {
	
	public static String BASE_API_URL="http://inventory-service.tixuk.io/api/v4/";
	
	public SeatsService()
	{
		
		
	}

	
	public static ArrayList<String>  getSeats(String date, String time) {

		RestAssured.baseURI = BASE_API_URL;	
		
		Response response  = given().contentType(ContentType.JSON).header("affiliateId", "encoretickets").when()
				.get("products/6362/areas?date=" + date + "&time=" + time + "&quantity=2&includeSeatsAttributes=true").then()
				.log().ifError().assertThat().statusCode(HttpStatus.SC_OK).extract().response();

		
			
		JSONObject inputJSONOBject = new JSONObject(response.getBody().asString());
		utils.JsonParser.getKey(inputJSONOBject, "seatLumps");
		JSONArray firstArray = inputJSONOBject.getJSONArray("seats");
		ArrayList<String> seatsarray = new ArrayList<String>();
		String seats = utils.JsonParser.getKey(inputJSONOBject, "seatLumps");
		seatsarray.add(seats);
		return seatsarray;

	}
	
	public static void  getRestrictedSeats(String date, String time) {

		RestAssured.baseURI = BASE_API_URL;	
		
		Response response = given().contentType(ContentType.JSON).header("affiliateId", "encoretickets").when()
				.get("products/6362/areas?date=" + date + "&time=" + time + "&quantity=2&includeSeatsAttributes=true").then()
				.log().ifError().assertThat().statusCode(HttpStatus.SC_OK).extract().response();

		
          
    		
     	JSONObject inputJSONOBject = new JSONObject(response.asString()); 
     	 
 	    // Utils.JsonParser.getKey(inputJSONOBject, "seats");
 	     
 	       
 	  // Utils.JsonParser.getKey(inputJSONOBject, "seatIdentifier");
 	  //Utils.JsonParser.getKey(inputJSONOBject, "isRestrictedView");
 	  
 	 utils.JsonParser.getKey(inputJSONOBject, "seats");
 	      
 	     
 	   } 

	
	
	

}
