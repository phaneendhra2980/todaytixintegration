package pages;

import java.time.Duration;
import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

public class BookingSeatPlanPage {

	WebDriver driver;
	By DateField = By.xpath("//div[@class='dayContainer']//span[@aria-label='May 20, 2022']");
	By GetTicketsButton = By.xpath("//*[@id='inventory-app']//*/button[@class='o-btn o-btn__ticket o-btn--quicksearch o-btn__cta o-btn__cta--primary u-w--100% t-btn o-btn__cta--mobile t-btn-super']");

	public BookingSeatPlanPage(WebDriver driver) {
		this.driver = driver;
	}

	public void SelectDate(String Datevalue) {
//		WebElement element = driver.findElement(DateField);
//		JavascriptExecutor executor = (JavascriptExecutor) driver;
//		executor.executeScript("arguments[0].click();", element);
		
		WebElement dateWidgetFrom = new WebDriverWait(driver, Duration.ofSeconds(3))
				.until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.className("dayContainer"))).get(0);
	        //This are the columns of the from date picker table
	        List<WebElement> columns = dateWidgetFrom.findElements(By.tagName("span"));
	        Utils.DateUtil.clickGivenDay(columns, Datevalue);

	}

	public void SelectPerformance(String time) {
		List<WebElement> element = driver.findElements(PerformanceDates);
		for (int i = 0; i < element.size(); i++) {
			if (element.get(i).getText().contains(time)) {
				JavascriptExecutor executor = (JavascriptExecutor) driver;
				executor.executeScript("arguments[0].click();", element.get(i));
			}

		}	

	}
	
	public void ClickGetTickets() {
		WebElement element = driver.findElement(GetTicketsButton);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", element);
	
	}
}
