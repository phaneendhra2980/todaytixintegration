package mobilepages;

import org.openqa.selenium.By;
import org.openqa.selenium.support.ui.WebDriverWait;

import io.appium.java_client.MobileElement;
import io.appium.java_client.android.AndroidDriver;

public class TodayTixApp {
	
	 public AndroidDriver<MobileElement> driver;
	    public WebDriverWait                wait;

	    //Locators
	    By skip = By.id("com.todaytix.TodayTix:id/skip_button");
		By selectcity = By.id("com.todaytix.TodayTix:id/select_city_button");
		By londonLocation = By.xpath("//android.widget.TextView[@text='London']");
		By bannerpager = By.id("com.todaytix.TodayTix:id/banner_pager");
		By headline = By.id("com.todaytix.TodayTix:id/headline");
		By bannerimage = By.xpath("//android.widget.TextView[@text='Dear Evan Hansen']");
		By title = By.id("com.todaytix.TodayTix:id/title");
		By footer = By.id("com.todaytix.TodayTix:id/footer_button");
		By continuecheckout = By.id("com.todaytix.TodayTix:id/checkout_button");
		By calenderdatecheckout = By.id("com.todaytix.TodayTix:id/part_one_date");
		By chartContainer = By.id("chartContainerContainer");
		
		public void ClickonSkip() {
			MobileElement skipElement = (MobileElement) driver.findElement(skip);
			skipElement.click();
		}
		

		// CLICK SELECT CITY
		MobileElement selectcityElement = (MobileElement) driver.findElement(selectcity);
		selectcityElement.click();

		// SELECT LONDON LOCATION
		MobileElement londonLocationElement = (MobileElement) driver.findElement(londonLocation);
		londonLocationElement.click();

//		List<MobileElement> headlineElements = (List<MobileElement>) driver.findElements(headline);
//		for(int i=0;i<headlineElements.size();i++)
//		{
//			if(headlineElements.get(i).getText()=="Dear Evan Hansen")
//			{
//				driver.findElementByClassName("android.view.ViewGroup").click();
//			}
//		}

		// driver.findElementById("com.todaytix.TodayTix:id/banner_pager").click();

		MobileElement frame = driver.findElementsByClassName("android.widget.FrameLayout").get(0);
		driver.switchTo().frame(frame);

		

		// Click Pick your seats
		MobileElement footerElement = (MobileElement) driver.findElement(footer);
		footerElement.click();

		List<MobileElement> SelectCalenderDateElements = (List<MobileElement>) driver
				.findElements(calenderdatecheckout);
		for (int i = 0; i < SelectCalenderDateElements.size(); i++) {
			if (SelectCalenderDateElements.get(i).getText() == "23") {
				SelectCalenderDateElements.get(i).click();
			}
		}

		// Click Availbilty
		footerElement.click();

		// Select Seat
		MobileElement chartContainerElement = (MobileElement) driver.findElement(chartContainer);
		chartContainerElement.click();
		chartContainerElement.click();
		chartContainerElement.click();

		// Click Continue
		MobileElement continuecheckoutElement = (MobileElement) driver.findElement(continuecheckout);
		continuecheckoutElement.click();

}
